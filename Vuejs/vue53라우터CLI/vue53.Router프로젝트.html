<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Vue Router Project</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- CSS import -->
    <link rel="stylesheet" href="../css/reset.css">

</head>
<body>
    <div style="margin: 40px 0 0 30px;">
        <a href="#" onClick="window.open('../../ES2015문법/ap01.docs/npm사용법.html','npm사용법','width=800,height=400,toolbar=no,menubar=no,scrollbars=no,resizable=yes');return false;" rel="nofollow">npm 사용법</a>
    </div>
    <xmp>
        Vue-CLI를 사용하여 프로젝트를 만들고 라우팅을 적용하여 본다.


        ##################################
        # Vue-CLI 학습하기
        ##################################

        Vue-CLI 구성요소
            CLI코어: @vue/cli
            CLI서비스: @vue/cli-service
                웹팩
                웹팩개발서버
            CLI플러그인: @vue/cli
                router
                vuex
                @vue/cli-plugin-babel
                @vue/cli-plugin-eslint
                @vue/cli-plugin-unit-jest


        Vue-CLI 플러그인 추가
            vue add 플러그인명. 예시) vue add router
            npm install --save 플러그인명. 예시) npm install --save vuex

        Vue-CLI 의 버전
            2.x : <== 교재
            3.x :
            4.x : <== 최신 버전

        Vue-CLI 설치:
            npm install -g @vue/cli  <== global 설치
            npm install    @vue/cli  <== local 설치

        Vue-CLI 버전 확인 :
            vue -V      <== global 설치인경우
            또는
            npx vue -V   <== local 로컬설치인경우


        ##################################
        # Vue-CLI 프로젝트 생성 및 설정 작업
        ##################################
            step 02-01. Vue-CLI 전역 설치 삭제
            $ npm uninstall -g @vue/cli


            step 02-02. Vue-CLI 전역 설치. 한번만 수행. --force 를 사용하면 강제로 덮어쓰게 된다.
            $ npm install -g @vue/cli --force


            step 02-03. vue-cli 버전 확인
            $ vue -V
            @vue/cli 4.5.13



            step 02-04. 현재 폴더의 파일 목록 조회
            $ ls
            1차  2차  3차  vue53.Router프로젝트.html

            step 02-05. routerprj01 프로젝트 생성. package.json 생성.
            $ vue create  routerprj01

            Vue CLI v4.5.13
            ? Please pick a preset:
              Default ([Vue 2] babel, eslint)
              Default (Vue 3 Preview) ([Vue 3] babel, eslint)
            > Manually select features

            ? Check the features needed for your project:
            (*) Choose Vue version
            (*) Babel
            ( ) TypeScript
            ( ) Progressive Web App (PWA) Support
            (*) Router
            ( ) Vuex
            ( ) CSS Pre-processors
            (*) Linter / Formatter
            ( ) Unit Testing
            ( ) E2E Testing

            ? Choose a version of Vue.js that you want to start the project with (Use arrow keys)
            > 2.x
              3.x (Preview)

            ? Use history mode for router? (Requires proper server setup for index fallback in production) (Y/n) Yes

            ? Pick a linter / formatter config:
              ESLint with error prevention only
              ESLint + Airbnb config
              ESLint + Standard config
            > ESLint + Prettier

            ? Pick additional lint features:
            > (*) Lint on save
              ( ) Lint and fix on commit

            ? Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)
            > In dedicated config files
              In package.json

            ? Save this as a preset for future projects? (y/N) N

            ...중략

            $ cd routerprj01
            $ npm run serve

            step 02-06. 현재 폴더의 파일 목록 조회. 프로젝터 폴더(routerprj01) 존재 여부 확인.
            $ ls
            1차 2차 3차 routerprj01 vue53.Router프로젝트.html


            step 02-07. 생성된 프로젝트 폴더(routerprj01)로 이동
            $ cd routerprj01


            step 02-08. 현재 폴더의 파일 목록 조회. package.json 이 보이면 정상.
            $ ls
            babel.config.js  node_modules  package.json  package-lock.json  public  README.md  src


            step 02-09. router 추가
            $ vue add router


            step 02-10. 비동기 통신 라이브러리 axios 추가
            $ npm install --save  axios

            step 02-11.  프로젝트 실행 설정 routerprj01/package.json 수정
                a. 실행시 브라우저로 열기  ==>  --open
                b. 실행 서버 포트 변경     ==>  --port 4000

                "scripts": {
                    "serve": "vue-cli-service serve --open --port 4000",
                    "build": "vue-cli-service build",
                    "lint": "vue-cli-service lint"
                },

            step 02-12. 현재 폴더의 파일 목록 조회. package.json 존재하는지 확인
            $ ls

            step 02-13. 서버 실행. package.json 이 있는 폴더에서 실행 해야 됨.
            $ npm run serve

            step 02-14. 배포할 파일들이 생성됨. 빌드가 완료되면  dist/ 폴더에 관련 파일들이 생성됨.
            $ npm run build

            step 02-15. 코드 표준화 수행
            $ npm run lint



        3. 프로젝트 폴더 구조
           프로젝트
            ├─ dist                     # 빌드된 결과물이 저장되는 폴더. 서버로 배포되는 파일들.
            ├─ node_modules             # npm 모듈(패키지) 저장 폴더
            ├─ public                   # 배포 버전을 빌드할 때 사용하는 파일.
            │   └─ index.html
            │   └─ favion.ico
            └─ src                              # 소스 코드 폴더
            │   └─ assets                      # 이미지, CSS, 기타 자원 파일
            │   │   └─ logo.png
            │   ├─ components                  # 컴포넌트
            │   │   └─ user
            │   │       └─ UserLogin.vue      # 파일 생성. Vue component에 해당됨
            │   │       └─ UserRegister.vue   # 파일 생성. Vue component에 해당됨
            │   ├─ router
            │   │   └─ index.js               # 라우터 페이지
            │   ├─ views
            │   │   └─ Signup.vue             # 파일 생성. Vue 인스턴스에 해당됨
            │   ├─ App.vue
            │   └─ main.js
            ├─ babel.config.js
            ├─ package.json
            └─ README.md


            step 03-1. ~/src/components/user/UserLogin.vue 생성
            <template>
                <div class="col-md-3 mt-4">
                    <h1 class="text-center">Login</h1>
                    <template v-if="!isLogin">
                        <form name="loginF" method="POST" v-on:submit.prevent="login">
                            <div class="row">
                                <div class="col-md-10 offset-md-1">
                                    User ID:
                                    <input type="text" name="id" v-model="tmpUser.uid" ref="uid" placeholder="User ID" class="form-control" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-10 offset-md-1">
                                    PASSWORD:
                                    <input type="password" name="pwd" v-model="tmpUser.pwd" ref="upwd" placeholder="Password" class="form-control" />
                                </div>
                            </div>
                            <div class="col-md-10 offset-md-1 p-1">
                                <button class="btn btn-block btn-primary mt-3">
                                    Login
                                </button>
                            </div>
                        </form>
                        <div>
                            <p>
                                로그인 테스트용: ID / PW<br />
                                uid01 / pwd01<br />
                                uid02 / pwd02<br />
                                <br />
                                로그인 테스트 URL: http://localhost:5050/user/login?uid=uid01&pwd=pwd01<br />
                            </p>
                        </div>
                    </template>
                    <template v-else>
                        <div class="alert alert-primary m-4">
                            <h4 class="text-primary">{{ user.uid }}님 로그인 중...</h4>
                            <a href="#" v-on:click="logout">로그아웃</a>
                        </div>
                    </template>
                </div>
            </template>


            step 03-2. ~/src/components/user/UserRegister.vue 생성
            <template>
                <div>
                    <div id="join" class="container p-3">
                        <h1 class="text-center text-primary">SingUp</h1>
                        <div class="row">
                            <div class="col-md-8 offset-md-2">
                                Name:
                                <input type="text" name="name" v-model="user.name" placeholder="Name" class="form-control" />
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-8 offset-md-2">
                                User ID:
                                <input type="text" name="id" v-model="user.id" v-on:keyup="checkId" class="form-control" placeholder="User ID" />
                                <div class="text-danger" v-show="errId">
                                    아이디는 4자이상 6자 이하 입니다.
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-8 offset-md-2">
                                PASSWORD:
                                <input type="text" name="pwd" v-model="user.pwd" v-on:keyup="checkPwd" placeholder="Password" class="form-control" />
                                <div class="text-danger" v-show="errPwd">
                                    비밀번호는 4자 이상 8자 이내입니다.
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-8 offset-md-2">
                                PASSWORD Confirm :
                                <input type="text" name="pwd2" v-on:keyup="checkRePwd" placeholder="Password Confirm" class="form-control" />
                                <div class="text-danger" v-show="errPwd2">
                                    비밀번호가 일치하지 않아요
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-8 offset-md-2">
                                Email :
                                <input type="text" name="email" v-model="user.email" v-on:change="checkEmail" placeholder="Email" class="form-control" />
                                <div class="text-danger" v-show="errEmail">
                                    이메일 형식에 맞지 않아요
                                </div>
                            </div>
                        </div>

                        <div class="row m-2">
                            <div class="col-md-8 offset-md-2 p-1">
                                <button class="btn btn-block btn-outline-success" v-on:click="join">
                                    Signup
                                </button>
                            </div>
                        </div>

                        <div v-show="isProcess" class="alert alert-danger m-5">
                            <h3>회원 가입 요청 중...</h3>
                        </div>
                    </div>
                </div>
            </template>

            step 03-3. ~/src/views/Signup.vue 생성
            <template>
                <div class="signup">
                    <h1>This is an signup page</h1>
                    <user-register></user-register>
                </div>
            </template>


            step 03-4. ~/App.vue 에 router-link 추가
            <div id="app">
                <div>
                    <router-link to="/login">Login</router-link>
                </div>
                <div id="nav">
                    <router-link to="/">Home</router-link> |
                    <router-link to="/about">About</router-link> |
                    <router-link to="/signup">Signup</router-link>
                </div>
                <router-view />
            </div>

            step 03-5. /login과 /signup 라우터 경로 추가. ~/src/router/index.js 수정
            import UserLogin from "@/components/user/UserLogin.vue";

            {
                path: "/signup",
                name: "Signup",
                component: () => import("../views/Signup.vue")
            },
            {
                path: "/login",
                name: "Login",
                component: UserLogin
            }


    </xmp>

</body>
</html>